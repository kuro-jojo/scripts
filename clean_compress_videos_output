#!/usr/bin/bash

# --- Input validation ---
if [ -z "$1" ]; then
    echo "Error: No directory provided."
    exit 1
fi

TARGET_DIR="$1"

if [ ! -d "$TARGET_DIR" ]; then
    echo "Error: '$TARGET_DIR' is not a valid directory."
    exit 1
fi

for file in "$TARGET_DIR"/*; do
    [ -f "$file" ] || continue

    base=$(basename -- "$file")

    if [[ "$base" == *_compressed.* ]]; then
        name="${base%_compressed.*}"
        ext="${base##*.}"
        mv "$file" "${TARGET_DIR}/${name}.${ext}"
   # else
    #    rm -f "$file"
    fi
done

echo "Cleanup complete."
